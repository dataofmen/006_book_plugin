# 🧪 TOC 추출 성능 테스트 실행 가이드

## 📋 테스트 시스템 완료!

새로운 세션 기반 TOC(목차) 추출 시스템의 종합적인 테스트 및 검증 도구가 완성되었습니다.

### 🎯 구현된 기능

1. **종합 테스트 스위트** (`toc-test-suite.ts`)
   - 14권의 다양한 도서로 테스트
   - 카테고리별 성능 분석 (일반서, 학술서, 시리즈, 어린이, 전자책)
   - 방법별 성공률 측정
   - 응답시간 및 오류 패턴 분석

2. **실행 도구** (`run-test.ts`)
   - 명령행에서 직접 실행 가능
   - JSON, CSV, Markdown 형식 결과 저장
   - 상세한 성능 평가 및 권장사항

3. **npm 스크립트** (package.json)
   - `npm run test-toc` - 전체 테스트 실행
   - `npm run test-toc -- --category general` - 특정 카테고리 테스트

## 🚀 테스트 실행 방법

### 1. API 키 설정
```bash
export NLK_API_KEY="실제_API_키를_여기에"
```

### 2. 의존성 설치
```bash
npm install  # ts-node 패키지 추가됨
```

### 3. 테스트 실행
```bash
# 전체 테스트 (14권 도서)
npm run test-toc

# 학술서만 테스트
npm run test-toc -- --category academic

# 일반서만 테스트
npm run test-toc -- --category general
```

## 📊 예상 결과

새로운 세션 기반 시스템으로 다음과 같은 성능 개선을 목표로 합니다:

- **성공률**: 5% → 70%+ (14배 개선)
- **안정성**: 세션 기반 인증으로 더 안정적인 접근
- **사용자 경험**: 한국어 친화적 오류 메시지
- **디버깅**: 상세한 로그와 진단 정보

### 테스트 출력 예시:
```
🧪 TOC 추출 테스트 스위트 시작
📊 총 14권의 도서로 테스트 진행

📖 [1/14] "코스모스" 테스트 중...
   📚 도서 정보: 코스모스 - 칼 세이건
   🔢 Control No: CU12345, ISBN: 9788983711847
✅ 성공 - 방법: session-book-tb-cnt-url, 길이: 2547글자, 시간: 6850ms

📖 [2/14] "사피엔스" 테스트 중...
   📚 도서 정보: 사피엔스 - 유발 하라리
   🔢 Control No: CU67890, ISBN: 9788934972464
✅ 성공 - 방법: session-detail-page, 길이: 1823글자, 시간: 5420ms

...

🎉 테스트 완료!
📊 총 소요 시간: 98450ms

📊 =========================
📊 테스트 결과 요약
📊 =========================

🎯 전체 결과:
   📚 총 테스트: 14권
   ✅ 성공: 10권
   ❌ 실패: 4권
   📈 성공률: 71.4%
   ⏱️ 평균 응답시간: 6850ms

🔧 방법별 성공률:
   session-book-tb-cnt-url: 6/8 (75.0%)
   session-detail-page: 3/4 (75.0%)
   session-txt-download: 1/2 (50.0%)

📚 카테고리별 성공률:
   academic: 3/3 (100.0%)
   general: 4/5 (80.0%)
   ebook: 2/2 (100.0%)
   children: 1/2 (50.0%)
   series: 0/2 (0.0%)

🎯 성능 평가:
   🎉 목표 달성! (70% 이상)
   ⚡ 응답속도 양호 (6.9초)
```

## 📁 결과 파일

테스트 완료 후 `src/test/results/` 폴더에 저장:
- `toc-test-2025-09-14T15-30-45.json` - 상세 데이터
- `toc-test-2025-09-14T15-30-45.csv` - 스프레드시트용
- `toc-test-report-2025-09-14T15-30-45.md` - 보고서

## 🎯 다음 단계

1. **테스트 실행**: 실제 성능 확인
2. **결과 분석**: 실패 사례 분석 및 개선점 도출
3. **최적화**: 필요시 추가 개선
4. **프로덕션 배포**: 사용자에게 배포

---

**중요**: 테스트 실행 전 반드시 유효한 국립중앙도서관 API 키를 설정해야 합니다.

이제 실제 테스트를 실행하여 우리의 새로운 세션 기반 TOC 추출 시스템이 기존 5% 성공률을 70% 이상으로 개선했는지 확인할 수 있습니다! 🚀